{"version":3,"sources":["services/persons.js","app.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","put","concat","delete","Notification","_ref","message","type","react_default","a","createElement","className","Person","_ref2","person","removePerson","name","number","onClick","Filter","props","value","onChange","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Rows","persons","newNameFilter","rowsToShow","filter","toUpperCase","includes","map","app_Person","key","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewNameFilter","_useState5","_useState6","setNewName","_useState7","_useState8","setNewNumber","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","SuccessMessage","setSuccessMessage","useEffect","personService","initialPersons","app_Notification","app_Filter","event","target","app_PersonForm","preventDefault","personObject","length","originalPerson","window","confirm","setTimeout","returnedPerson","catch","error","app_Rows","find","n","ReactDOM","render","app","document","getElementById"],"mappings":"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","file":"static/js/main.af1cb20b.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react' \nimport personService from './services/persons'\nimport './index.css'\n\nconst Notification = ({ message, type }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={type}>\n      {message}\n    </div>\n  )\n}\n\nconst Person = ({ person, removePerson }) => {\n  return (\n    <li>{person.name} {person.number} <button onClick={removePerson}>Poista</button></li>\n  )\n}\n\nconst Filter = (props) => {\n  return (\n    <div>Rajaa näytettäviä: <input value={props.value} onChange={props.onChange}/></div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>nimi: <input value={props.newName} onChange={props.handleNameChange}/></div>\n      <div>numero: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\n      <div><button type=\"submit\">lisää</button></div>\n    </form>\n  )\n}\n\nconst Rows = (props) => {\n  const persons = props.persons\n  const newNameFilter = props.newNameFilter\n\n  const rowsToShow = newNameFilter === ''\n      ? persons\n      : persons.filter(person => person.name.toUpperCase().includes(newNameFilter.toUpperCase()))\n\n  const rows = () => rowsToShow.map(person =>\n    <Person key={person.id} person={person} removePerson={() => props.removePerson(person.id)} />\n  )\n\n  return (\n    <ul>\n      {rows()}\n    </ul>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]) \n  const [ newNameFilter, setNewNameFilter ] = useState('')\n  const handleNameFilterChange = (event) => { setNewNameFilter(event.target.value) }\n  const [ newName, setNewName ] = useState('')\n  const handleNameChange = (event) => { setNewName(event.target.value) }\n  const [ newNumber, setNewNumber ] = useState('')\n  const handleNumberChange = (event) => { setNewNumber(event.target.value)}\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [SuccessMessage, setSuccessMessage] = useState(null)\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons)\n    })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    if (persons.filter(person => person.name === newName).length > 0) {\n      const originalPerson = persons.filter(person => person.name === newName)[0]\n      if (window.confirm(`${originalPerson.name} on jo luettelossa, haluatko päivittää numeron?`)) { \n        personService\n          .update(originalPerson.id, personObject)\n          .then(() => {\n            setNewName('')\n            setNewNumber('')\n            setPersons(persons.map(person => person.id !== originalPerson.id ? person : personObject))\n          }).then(() => {\n            setSuccessMessage(`Tiedot päivitetty onnistuneesti`)\n            setTimeout(() => { setSuccessMessage(null) }, 5000)\n          })\n      }\n    } else {\n      personService.create(personObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n      }).then(() => {\n        setSuccessMessage(`Henkilö lisätty onnistuneesti`)\n        setTimeout(() => { setSuccessMessage(null) }, 5000)\n      }).catch(error => {\n        setErrorMessage(error.response.data.error)\n        setTimeout(() => { setErrorMessage(null) }, 5000)\n      })\n    }\n  }\n\n  const removePerson = id => {\n    const person = persons.find(n => n.id === id)\n    if (window.confirm(`Haluatko varmasti poistaa henkilön ${person.name}?`)) { \n      personService.remove(id).then(() => {\n        setSuccessMessage(`Henkilö poistettu onnistuneesti`)\n        setTimeout(() => { setSuccessMessage(null) }, 5000)\n      }).catch(error => {\n        setErrorMessage(`Henkilö ${person.name} on jo valitettavasti poistettu palvelimelta`)\n        setTimeout(() => { setErrorMessage(null) }, 5000)\n      })\n      setPersons(persons.filter(n => n.id !== id))\n    }\n  }\n\n  return (\n    <div>\n      <Notification message={SuccessMessage} type = \"success\" />\n      <Notification message={errorMessage} type=\"error\" />\n      <h2>Puhelinluettelo</h2>\n      <Filter value={newNameFilter} onChange={handleNameFilterChange} />\n      <h2>Lisää numero</h2>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h2>Numerot</h2>\n      <Rows newNameFilter={newNameFilter} persons={persons} removePerson={removePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}